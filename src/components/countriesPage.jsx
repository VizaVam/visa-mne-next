'use client'

import React, { useMemo, Suspense, lazy } from "react";
import Link from "next/link";
import Image from "next/image";
import { notFound, useParams, usePathname } from 'next/navigation';
import { motion } from "framer-motion";
import { countries } from "@/data/countries";
import { useInView } from 'react-intersection-observer';
import { useModal } from "@/components/modalcontext";
import dynamic from "next/dynamic";

// --- Ленивая загрузка компонентов с fallback ---
const Discount = dynamic(() => import('@/components/discount'), {
    loading: () => <div className="px-[7%] py-6 text-center">Загрузка акции...</div>,
});

const Slider = dynamic(() => import('@/components/slider'), {
    loading: () => <div className="px-[7%] py-10 text-center">Загрузка слайдера...</div>,
});

const Docs = dynamic(() => import('@/components/docs'), {
    loading: () => <div className="px-[7%] py-10 text-center">Загрузка документов...</div>,
});

const DocsShengen = dynamic(() => import('@/components/docsShengen'), {
    loading: () => <div className="px-[7%] py-10 text-center">Загрузка документов...</div>,
});

const DownloadFiles = dynamic(() => import('@/components/downloadFiles'), {
    loading: () => <div className="px-[7%] py-10 text-center">Загрузка файлов...</div>,
});

const PhoneForm = dynamic(() => import('@/components/newModal'), {
    ssr: false,
    loading: () => <div className="px-[7%] py-6 text-center">Загрузка формы...</div>,
});

const NewStepsCountries = dynamic(() => import('@/components/newStepsCountries'), {
    loading: () => <div className="px-[7%] py-10 text-center">Загрузка шагов...</div>,
});

const FAQ = dynamic(() => import('@/components/Faq'), {
    loading: () => <div className="px-[7%] py-10 text-center">Загрузка вопросов...</div>,
});

const Contacts = dynamic(() => import('@/components/contacts'), {
    loading: () => <div className="px-[7%] py-10 text-center">Загрузка контактов...</div>,
});

const CountryCards = dynamic(() => import('@/components/alternativeCountries'), {
    loading: () => <div className="px-[7%] py-6 text-center">Загрузка альтернатив...</div>,
});

const TakePrice = dynamic(() => import('@/components/TakePrice'), {
    loading: () => <div className="px-[7%] py-6 text-center">Загрузка цен...</div>,
});
// --- Конец ленивой загрузки ---

const AdvantageItem = ({ value, description }) => (
    <li className="flex items-center flex-col text-lg m-5">
        {/* Убедитесь, что /check.svg оптимизирован */}
        <Image
            width={24}
            height={24}
            src="/CheckIcon.svg"
            alt="Преимущество работы с VisaVam.by"
            className="h-[40px] w-[40px] mr-2"
            loading="lazy" // Хорошо для некритических изображений
        />
        <div className="flex items-center flex-col"> 
            <p className="font-[500] text-[20px] mdd:leading-none text-center whitespace-nowrap">
                {value}
            </p>
            {description && (
                <p className="text-[16px] text-[#808080] mdd:leading-none text-center whitespace-nowrap">
                    {description}
                </p>
            )}
        </div>
    </li>
);

const AdvantageItemTop = ({ value, description, iconPath }) => (
    <li className="flex items-center text-lg">
        {/* Убедитесь, что /check.svg оптимизирован */}
        <Image
            width={24}
            height={24}
            src={iconPath}
            alt="Преимущество работы с VisaVam.by"
            className="h-[40px] w-[40px] mr-2"
            loading="lazy" // Хорошо для некритических изображений
        />
        <div> 
            <p className="font-[500] text-[20px] mdd:leading-none">
                {value}
            </p>
            {description && (
                <p className="text-[16px] text-[#808080] mdd:leading-none whitespace-nowrap">
                    {description}
                </p>
            )}
        </div>
    </li>
);

// ✅ LazySection — для умной загрузки по скроллу
const LazySection = ({ children, fallback = "Загрузка...", rootMargin = "100px" }) => {
    const { ref, inView } = useInView({
        triggerOnce: true,
        rootMargin,
    });

    return (
        <div ref={ref}>
            {inView ? children : <div className="py-10 text-center">{fallback}</div>}
        </div>
    );
};

// FAQ data (unchanged, assuming it's in a separate file or remains here)
export const faqDataByCountry = {
    "viza-v-polshu": [
        {
            question: "Можно ли сейчас открыть визу в Польшу для белорусов?",
            answer: "Да, белорусы могут открыть визу в Польшу, но процесс усложнён из-за усиления контроля со стороны польских властей. Посольство рассматривает заявки с осторожностью, особенно при отсутствии чётких связей с Беларусью или недостаточных документов. Рекомендуется тщательно готовить пакет бумаг и уточнять актуальные требования перед подачей. Также процесс регистрации на визит в Визовые центры Польши проходит с применением видеоверификации, достаточно сложный технически и занимает много времени."
        },
        {
            question: "Как долго рассматривается виза в Польшу?",
            answer: "Виза в Польшу для белорусов обычно рассматривается в течение 2–3 недель, но срок рассмотрения может увеличиваться по решению Консула в зависимости от загруженности консульства и необходимости дополнительных проверок. Рекомендуется подавать документы заблаговременно, особенно при планировании поездки в высокий сезон."
        },
        {
            question: "Какая сумма должна быть на счету для визы в Польшу?",
            answer: "Для получения визы С в Польшу белорусам желательно иметь на счету не менее €500–€1000, в зависимости от срока пребывания и целей поездки. Эта сумма должна подтверждать вашу финансовую состоятельность и возможность содержать себя во время пребывания в стране. Точная сумма может варьироваться, и важно предоставить официальную выписку из банка."
        },
        {
            question: "Почему сложно записаться на визу в Польшу?",
            answer: "Запись на польскую визу осложняется ограниченным количеством свободных слотов и высоким спросом, особенно в Минске. Посольство и визовые центры работают с усиленными мерами проверки, что также влияет на доступность записи. Процедура регистрации на визит в Визовые центры Польши с видеоверификацией сложна технически и требует длительного времени. Рекомендуется заблаговременно бронировать время и внимательно следить за появлением новых мест в системе."
        },
        {
            question: "Кому отказывают в визе в Польшу?",
            answer: "В визе в Польшу чаще всего отказывают тем, у кого недостоверные или неполные документы, а также при подозрении в намерении остаться в Польше нелегально. Отказ могут получить заявители с историей нарушений визового режима или те, чьи цели поездки вызывают сомнения. Также возможен отказ из-за ошибок в документах от работодателя или приглашающей стороны."
        }
    ],
    "rabochaya-viza-v-polshu": [
        {
            question: "Что нужно для рабочей визы в Польшу для белорусов?",
            answer: "Для рабочей визы в Польшу белорусам необходимо иметь приглашение на работу, оформленное польским работодателем. Нужно подать паспорт, фото, приглашение, страховку в Визовый центр Польши. Также оплачивается консульский и сервисный сборы."
        },
        {
            question: "Почему могут не открыть рабочую визу в Польшу?",
            answer: "Белорусам могут отказать в рабочей визе в Польшу из-за неполного пакета документов, подозрений в намерении остаться нелегально и не работать по этому приглашению. Также возможен отказ из-за недостоверных данных. Важно, чтобы все документы от работодателя были корректными и официальными."
        },
        {
            question: "Сколько времени делается рабочая виза в Польшу?",
            answer: "Рабочая виза в Польшу обычно рассматривается в течение 2–3 недель, но срок может быть продлен при необходимости проверки документов. Рекомендуется подаваться заранее, особенно в периоды высокой нагрузки на консульства. И необходимо учитывать время, которое потребуется для регистрации на визит в Визовый центр Польши."
        }
    ],
    "viza-v-sloveniu": [
        {
            question: "Можно ли сейчас оформить визу в Словению?",

            answer: "Да, белорусы могут оформить шенгенскую визу в Словению. Для этого необходимо подать соответствующие документы в Консульство Германии. Срок рассмотрения визы обычно составляет до 15 рабочих дней, но может быть дольше."
        },
        {
            question: "Какая виза нужна в Словению для белорусов?",
            answer: "Для поездки в Словению белорусам нужна шенгенская виза (категория C), поскольку Словения входит в Шенгенскую зону. Если планируется пребывание в Словении более 90 дней, то потребуется национальная виза (категория D)."
        }
    ],
    "viza-v-germaniyu": [
        {
            question: "Можно ли получить визу в Германию белорусам?",
            answer: "Да, белорусы могут получить визу в Германию, но процесс получения визы зависит от целей поездки, срока пребывания."
        },
        {
            question: "Какая сумма должна быть на счету для визы в Германию?",
            answer: "Для получения шенгенской визы в Германию белорусам необходимо подтвердить финансовую состоятельность — то есть показать, что у вас достаточно средств для пребывания в стране. Требования к сумме на счету зависят от длительности поездки, типа визы и обстоятельств поездки (например, проживание за свой счёт или с приглашением)."
        },
        {
            question: "Почему могут не дать визу в Германию?",
            answer: "Визу в Германию белорусам могут отказать по разным причинам. Такие как: подозрение в намерении остаться в стране нелегально, недостаточное финансирование поездки, неясные или недостоверные цели поездки, проблемы с приглашением, история посещения других стран без соблюдения правил."
        },
        {
            question: "На сколько дают визу в Германию по приглашению?",
            answer: "Визу в Германию по приглашению белорусам могут выдать как на короткий срок (шенгенская виза С сроком до 90 дней), так и на длительный срок (национальная виза D - сроком более 90 дней) — всё зависит от целей поездки и типа приглашения и, конечно, срока пребывания, который указан в приглашении."
        },
        {
            question: "Как называется виза по приглашению в Германию?",
            answer: "Виза по приглашению в Германию может быть разных типов, в зависимости от цели вашей поездки. Но официально используется термин “Шенгенская виза (тип С)”, но многим она известна как гостевая виза. По приглашению юридического лица в Германии для служебных поездок, командировок можно запрашивать деловую визу."
        }
    ],
    "viza-v-ispaniyu": [
        {
            question: "Можно ли получить визу в Испанию сейчас?",
            answer: "Да, белорусы могут подаваться на визу в Испанию, но процесс затруднён из-за усиленных проверок, ограниченного количества выделяемых слотов. Посольство тщательно оценивает каждую заявку, особенно при отсутствии чётких связей с Беларусью или недостаточных оснований для поездки. Рекомендуется тщательно готовить документы и подаваться заранее."
        },
        {
            question: "Как получить визу в Испанию для белорусов?",
            answer: "Для получения визы в Испанию белорусам необходимо подать документы в Визовый центр Испании в Минске. Потребуется стандартный пакет документов: паспорт, фотографии, медицинская страховка, подтверждение финансовой состоятельности (справка с работы и выписка из банка), бронь отеля и авиабилетов."
        },
        {
            question: "Какая сумма должна быть на счету для получения Испанской визы?",
            answer: "Для получения испанской визы белорусам необходимо иметь на счету сумму из расчета не менее 90 евро на каждый день пребывания. В данную сумму не входят стоимость авиаперелета и проживания в отели. Важно предоставить выписку из банка, подтверждающую движение средств за последние 3 месяца по счету."
        },
        {
            question: "В каком случае могут не дать визу в Испанию?",

            answer: "Отказать в испанской визе белорусам могут по нескольким причинам. Самые частые – это предоставление неполного или некорректно оформленного пакета документов, а также недостаточные финансовые гарантии, вызывающие сомнения в способности заявителя обеспечить себя во время поездки."
        }
    ],
    "viza-vo-francziyu": [
        {
            question: "Можно ли белорусам во Францию?",
            answer: "Да, белорусам можно поехать во Францию, но для этого обязательно потребуется шенгенская виза. Ее можно получить в Посольстве Франции в Минске или в Консульстве другой страны Шенгенского соглашения. Условия получения визы аналогичны другим странам Шенгена."
        },
        {
            question: "Как быстро делают французскую визу?",
            answer: "Французскую визу обычно рассматривают в течение 10 рабочих дней, но срок может быть продлен в случае дополнительной проверки. Однако, рекомендуется подавать документы заблаговременно, особенно в пиковые сезоны."
        },
        {
            question: "Какая сумма должна быть на счету для французской визы?",
            answer: "Для получения французской визы необходимо иметь на счету сумму из расчета от 65 до 120 евро на каждый день пребывания. Если у вас есть подтвержденная и оплаченная бронь отеля, то достаточно 65 евро в день. При отсутствии брони отеля, сумма увеличивается до 120 евро в день. Также нужно предоставить выписку с банковского счета с движением средств за последние 3 месяца."
        },
        {
            question: "Почему могут не дать визу во Францию?",
            answer: "Основные причины отказа в визе во Францию: неполный или неправильно оформленный пакет документов, недостаточные финансовые средства для пребывания в стране, сомнения в истинных целях поездки или намерении вернуться на родину, а также нарушения визового режима в прошлом или предоставление заведомо ложной информации."
        }
    ],
    "viza-v-latviyu": [
        {
            question: "Можно ли сейчас получить визу в Латвию белорусам?",
            answer: "Латвия продлила ограничения на выдачу виз для граждан Беларуси до 31 декабря 2026 года. Это означает, что получение туристической или обычной шенгенской визы в Латвию для белорусов сейчас крайне затруднено. Исключения возможны только по определенным категориям, например, для получения национальной визы (категория D) для работы, учебы или по гуманитарным основаниям."
        },
        {
            question: "Как записаться на подачу визы в Латвию?",
            answer: "С учетом действующих ограничений на выдачу виз для граждан Беларуси, запись на подачу визы в Латвию возможна только для определенных категорий заявителей. Записаться на подачу документов можно через сайт визового центра VFS Global, который принимает заявления в Минске и Витебске. Также возможно подать документы напрямую в Посольство Латвии в Минске для некоторых категорий виз."
        }
    ],
    "viza-v-bolgariyu": [
        {
            question: "Нужна ли виза в Болгарию для граждан Беларуси?",
            answer: "Да, гражданам Беларуси для поездки в Болгарию нужна виза, т.к. Болгария стала частью Шенгенской зоны. Однако, если они имеют действующую шенгенскую визу другой страны или вид на жительство в стране Шенгенского соглашения, въезд возможен без дополнительной визы в соответствии с правилами Шенгенской зоны."
        },
        {
            question: "Можно ли сейчас получить визу в Болгарию?",
            answer: "Да, белорусы могут получить визу в Болгарию в настоящее время. Для въезда в страну требуется шенгенская виза, которую можно оформить в Посольстве Болгарии в Минске или через визовый центр."
        },
        {
            question: "Можно ли с шенгенской визой в Болгарию?",
            answer: "Да, с шенгенской визой белорусы могут въезжать в Болгарию, т.к. она присоединилась к Шенгенской зоне. Это означает, что любая действующая шенгенская виза, выданная любой страной Шенгенского соглашения, позволяет въезд в Болгарию для краткосрочного пребывания (до 90 дней в течение 180-дневного периода)."

        },
        {
            question: "Почему могут не дать визу в Болгарию?",
            answer: "В визе могут отказать, если представлены неполные или недостоверные документы, отсутствует подтверждение финансовой состоятельности или цели поездки вызывают сомнения. Также возможен отказ при наличии нарушений условий предыдущих виз, проблем с возвратом в страну проживания или недостаточного обоснования цели визита (например, для туристической или гостевой поездки). Важно тщательно подготовить пакет документов и честно ответить на вопросы консула."
        }
    ],
    "viza-v-horvatiu": [
        {
            question: "Как получить визу в Хорватию белорусу?",
            answer: "Хорватия входит в Шенгенскую зону, поэтому для въезда белорусам необходима шенгенская виза. Ее можно получить через Визовый центр Хорватии (VFS Global) в Минске, подав стандартный пакет документов."
        },
        {
            question: "Можно ли ехать в Хорватию без визы?",
            answer: "Нет, белорусам нельзя ехать в Хорватию без визы. С 1 января 2023 года Хорватия присоединилась к Шенгенской зоне. Соответственно, для въезда в страну гражданам Беларуси требуется шенгенская виза."
        },
        {
            question: "Сколько наличных денег брать с собой в Хорватию?",
            answer: "Для получения визы в Хорватию белорусам требуется подтвердить финансовую состоятельность из расчета не менее 60 евро на каждый день пребывания. При пересечении границы с Хорватией (как и любой другой страны Шенгенской зоны) без декларирования можно провозить наличные денежные средства и/или дорожные чеки на общую сумму, не превышающую эквивалент 10 000 евро."
        }
    ],
    "viza-v-niderlandy": [
        {
            question: "Можно ли сейчас белорусы получить визу в Нидерланды?",
            answer: "Да, белорусы могут получить шенгенскую визу для поездки в Нидерланды. Поскольку у Нидерландов нет собственного консульства в Беларуси, выдачей виз занимается Посольство Германии в Минске. Необходимо подготовить стандартный пакет документов, включающий паспорт, фото, страховку, справку с работы и выписку из банка, подтверждение бронирования жилья и билетов."
        },
        {
            question: "Какая виза нужна в Нидерланды для белорусов?",
            answer: "Для поездки в Нидерланды белорусам нужна шенгенская виза (категория C), так как Нидерланды являются частью Шенгенской зоны. Если планируется пребывание в стране более 90 дней, то потребуется национальная виза (категория D)."
        },
        {
            question: "Какая сумма должна быть на счету для визы в Нидерланды?",
            answer: "Для получения визы в Нидерланды необходимо иметь на счету сумму из расчета не менее 34 евро на каждый день пребывания. Важно предоставить выписку с банковского счета с движением средств за последние 3 месяца, которая подтверждает вашу финансовую состоятельность."
        }
    ],
    "viza-v-grecziyu": [
        {
            question: "Нужна ли греческая виза для белорусов?",
            answer: "Да, для поездки в Грецию белорусам обязательно нужна шенгенская виза, так как Греция входит в Шенгенскую зону. Ее можно оформить через Визовый центр Греции (Global Visa Center World) в Минске. Условия получения аналогичны другим странам Шенгена."
        },
        {
            question: "Какая сумма должна быть на счету для получения визы в Грецию?",
            answer: "Для получения визы в Грецию белорусам необходимо иметь на счету сумму из расчета не менее 60 евро на каждый день пребывания, не считая расходов на отель и билеты. При этом важно, чтобы выписка из банка подтверждала движение средств за последние 3 месяца."
        },
        {
            question: "Почему могут не дать визу в Грецию?",

            answer: "Отказ в визе может произойти по нескольким причинам. Чаще всего это неполный или некорректно оформленный пакет документов, недостаточные финансовые гарантии (у консула есть сомнения в вашей способности оплатить поездку и вернуться домой), а также сомнения в заявленных целях поездки или намерении вернуться на родину. Отказ также возможен при наличии нарушений визового режима в прошлом или предоставлении недостоверной информации."
        },
        {
            question: "Что нужно для визы в Грецию белорусу?",
            answer: "Для подачи на греческую визу белорусу потребуется действующий паспорт, две фотографии, медицинская страховка и подтверждение финансовой состоятельности (справка с работы и выписка из банка). Также необходимо подтвердить цели поездки (бронь отеля или приглашение) и транспортные документы."
        }
    ],
    "viza-v-vengriyu": [
        {
            question: "Можно ли сейчас получить венгерскую визу?",
            answer: "Белорусы могут получить шенгенскую визу в Венгрию. Документы подаются в Посольство Венгрии в Минске или через визовый центр VFS Global. Венгрия продолжает выдавать визы гражданам Беларуси, что делает ее одной из относительно доступных стран Шенгенской зоны для получения визы."
        },
        {
            question: "Сколько стоит венгерская виза для белорусов?",
            answer: "Стоимость венгерской визы для белорусов включает в себя консульский сбор и сервисный сбор визового центра. Консульский сбор: составляет 35 евро. Для детей до 6 лет он не взимается. Сервисный сбор: взимается визовым центром VFS Global и составляет около 18-21 евро (оплата производится в белорусских рублях по текущему курсу)."
        },
        {
            question: "Почему могут отказать в визе в Венгрию?",
            answer: "Основные причины отказа в венгерской визе аналогичны отказам в других шенгенских странах. Чаще всего это неполный или неправильно оформленный пакет документов, недостаточные финансовые гарантии для покрытия расходов на поездку и возвращение, а также сомнения в истинных целях поездки."
        },
        {
            question: "Сколько денег должно быть на счету для визы в Венгрию?",
            answer: "Для получения венгерской визы рекомендуется иметь на счету сумму не менее 500-600 евро на человека, с учетом того, что чем больше сумма, тем лучше. Важно предоставить выписку из банковского счета с движением средств за последние 3 месяца. Также необходима справка с места работы, подтверждающая доход за последние 3-6 месяцев."
        }
    ],
    "viza-v-italiyu": [
        {
            question: "Можно ли получить визу в Италию сейчас?",
            answer: "Да, белорусы могут получить визу в Италию в настоящее время. Для этого необходимо подать документы в Визовый центр Италии (TLScontact). Потребуется стандартный пакет документов для шенгенской визы."
        },
        {
            question: "Кому отказывают в визе в Италию?",
            answer: "Итальянское консульство может отказать в визе по причинам, общим для Шенгенской зоны. К ним относятся неполный или некорректно оформленный пакет документов, недостаточное финансовое обеспечение для пребывания в стране, а также сомнения в заявленной цели поездки, при нарушении визового режима в прошлом, наличии судимостей или предоставление ложной информации."
        },
        {
            question: "Какая сумма должна быть на счету для визы в Италию?",
            answer: "Для получения итальянской визы необходимо иметь на счету сумму из расчета не менее 90 евро на каждый день пребывания. В данную сумму не входят стоимость авиаперелета и проживания в отели. При этом важно предоставить выписку из банка с движением средств за последние 3 месяца."
        },
        {
            question: "Можно ли въехать в другую страну по итальянской визе?",

            answer: "Да, по итальянской шенгенской визе можно въезжать и находиться в других странах Шенгенской зоны. Главное правило Шенгена гласит, что визу следует получать в консульстве той страны, которая является основной целью поездки или где планируется наиболее длительное пребывание. В случае если срок пребывания во всех странах одинаков, то визу получают в консульстве страны первого въезда в Шенгенскую зону."
        }
    ],
    "viza-v-rumyniyu": [
        {
            question: "Какая виза нужна в Румынию для белорусов?",
            answer: "Румыния входит в Шенгенскую зону. Это означает, что для въезда в Румынию белорусам теперь требуется шенгенская виза. Можно оформить как румынскую шенгенскую визу (категория С), так и въехать по действующей шенгенской визе, выданной любой другой страной Шенгенского соглашения."
        },
        {
            question: "Можно ли с румынской визой ехать в Европу?",
            answer: "Румыния является частью Шенгенской зоны. Это означает, что шенгенская виза, выданная Румынией после этой даты, позволяет въезжать и находиться в других странах Шенгенской зоны на срок до 90 дней в течение любого 180-дневного периода."
        },
        {
            question: "Какие документы нужны для оформления визы в Румынию?",
            answer: "Для оформления шенгенской визы в Румынию белорусу потребуется действующий паспорт, две фотографии, медицинская страховка и подтверждение финансовой состоятельности. Также необходимы подтверждения цели поездки (бронь отеля или приглашение) и транспортные билеты. Все документы подаются в Посольство Румынии в Минске по предварительной записи."
        }
    ],
    "viza-v-avstriyu": [
        {
            question: "Можно ли сейчас получить австрийскую визу?",
            answer: "Да, белорусы могут получить австрийскую визу. Обращаться за шенгенской визой в Австрию следует в Посольство Германии в Минске, так как Австрия не имеет собственного дипломатического представительства в Беларуси. Документы подаются по предварительной записи, а срок рассмотрения обычно составляет от 7 до 15 рабочих дней."
        },
        {
            question: "Какая сумма должна быть на счету для визы в Австрию?",
            answer: "Для получения визы в Австрию белорусам необходимо иметь на счету сумму из расчета не менее 50 евро на каждый день пребывания. Важно предоставить выписку из банка, подтверждающую движение средств на счету."
        },
        {
            question: "Легко ли получить австрийскую С (шенгенскую) визу?",
            answer: "Получение австрийской шенгенской визы для белорусов считается относительно стабильным процессом, однако стоит учитывать, что Австрия не имеет своего консульства в Беларуси, и заявки подаются через Посольство Германии. Это может влиять на сроки рассмотрения и требования. В целом, если предоставлен полный и корректный пакет документов, а также имеются достаточные финансовые гарантии и четкая цель поездки, шансы на получение визы достаточно высоки. Важно внимательного относиться к подготовке пакета документов."
        }
    ],
    "rabochaya-viza-v-germaniyu": [
        {
            question: "Сколько времени рассматривают документы в Консульстве?",
            answer: "В среднем, процесс рассмотрения визового заявления занимает 4-8 недель. По усмотрению Консульства Германи срок рассмотрения может быть изменен."
        },
        {
            question: "Какова вероятность отказа?",
            answer: "Благодаря тщательной подготовке документов с нашей стороны, отказы практически исключены. Мы работаем только с теми кейсами, в успехе которых уверены."
        },
        {
            question: "Я получу визу ровно на 1 год?",
            answer: "Да, мы специализируемся на получении национальной рабочей визы типа D, которая стандартно выдается на срок до 1 года с возможностью дальнейшего продления в Германии."
        },
        {
            question: "С этой визой я смогу сначала прилететь, например, в Варшаву, а потом поехать в Германию?",
            answer: "Да, немецкая национальная виза дает вам право въезжать и свободно перемещаться по всей территории Шенгенской зоны."
        }
    ]
};

// Reusable PriceTable component
const PriceTable = ({ country, parseText }) => (
    <>
        {/* Desktop Table (md: and above) */}
        <div className="overflow-x-auto w-full mdd:hidden">
            <table className="w-full border-collapse">
                <colgroup>
                    <col className="w-1/3"/>
                    <col className="w-1/3"/>
                    <col className="w-1/3"/>
                </colgroup>
                <thead>
                <tr>
                    <th className="border border-[#CEE2FA] bg-[#F0F6FF] px-4 py-3 text-left font-semibold text-gray-700 w-1/3">
                        Услуга / Сбор
                    </th>
                    <th className="border border-[#CEE2FA] bg-[#F0F6FF] px-4 py-3 text-left font-semibold text-gray-700 w-1/3">
                        Стоимость
                    </th>
                    <th className="border border-[#CEE2FA] bg-[#F0F6FF] px-4 py-3 text-left font-semibold text-gray-700 w-1/3">
                        Примечание
                    </th>
                </tr>
                </thead>
                <tbody>
                {country.priceTable &&
                    country.priceTable.map((row, index) => (
                        <tr key={index} className={index % 2 === 0 ? '' : 'bg-gray-50'}>
                            <td className="border border-[#CEE2FA] px-4 py-3 text-gray-700">{row.service}</td>
                            <td className="border border-[#CEE2FA] px-4 py-3 text-gray-700">{row.cost}</td>
                            <td className="border border-[#CEE2FA] px-4 py-3 text-gray-700">{parseText(row.note)}</td>
                        </tr>
                    ))}
                </tbody>
            </table>
        </div>
        {/* Mobile Table (below md:) */}
        <div className="overflow-x-auto w-full md:hidden">
            <table className="w-full border-collapse">
                <colgroup>
                    <col className="w-1/2"/>
                    <col className="w-1/2"/>
                </colgroup>
                <thead>
                <tr>
                    <th className="border border-[#CEE2FA] bg-[#F0F6FF] px-4 py-3 text-left text-[14px] font-semibold text-gray-700 w-1/2">
                        Услуга / Сбор
                    </th>
                    <th className="border border-[#CEE2FA] bg-[#F0F6FF] px-4 py-3 text-left text-[14px] font-semibold text-gray-700 w-1/2">
                        Стоимость
                    </th>
                </tr>
                </thead>
                <tbody>
                {country.priceTable &&
                    country.priceTable.map((row, index) => (
                        <tr key={index} className={index % 2 === 0 ? '' : 'bg-gray-50'}>
                            <td className="border border-[#CEE2FA] px-4 py-3 text-[14px] text-gray-700">{parseText(row.serviceMob)}</td>
                            <td className="border border-[#CEE2FA] px-4 py-3 text-[14px] text-gray-700">{parseText(row.costMob)}</td>
                        </tr>
                    ))}
                </tbody>
            </table>
        </div>
    </>
);

// Reusable WhoItSuitsTable component
const WhoItSuitsTable = ({ country, parseText, excludedCountries1 }) => (
    <div className="overflow-x-auto w-full">
        <table className="w-full border-collapse">
            <colgroup>
                <col className="w-1/2"/>
                <col className="w-1/2"/>
            </colgroup>
            <thead>
            <tr>
                <th className="border border-[#CEE2FA] bg-[#F0F6FF] px-4 py-3 text-left text-[14px] font-semibold text-gray-700 w-1/2">
                    {excludedCountries1.includes(country.url) ? "Категории граждан" : "Типы визы"}
                </th>
                <th className="border border-[#CEE2FA] bg-[#F0F6FF] px-4 py-3 text-left text-[14px] font-semibold text-gray-700 w-1/2">
                    Цель поездки
                </th>
            </tr>
            </thead>
            <tbody>
            {country.matchTable &&
                country.matchTable.map((row, index) => (
                    <tr key={index} className={index % 2 === 0 ? '' : 'bg-gray-50'}>
                        <td className="border border-[#CEE2FA] px-4 py-3 text-[14px] text-gray-700">{parseText(row.typeviza)}</td>
                        <td className="border border-[#CEE2FA] px-4 py-3 text-[14px] text-gray-700">{parseText(row.goaltrip)}</td>
                    </tr>
                ))}
            </tbody>
        </table>
    </div>
);

// Reusable components from original code (unchanged)
const RippleButton = ({ onClick, children }) => (
    <button
        onClick={onClick}
        className="bbbt relative overflow-hidden w-full bg-customBlue hover:bg-blue-600 text-white py-3 rounded-full shadow-[0_2px_4px_-2px_rgba(0,122,255,0.8)] active:scale-95 transition-transform duration-150 ease-in-out"
    >
        {[0, 1, 2].map((i) => (
            <motion.span
                key={i}
                className="absolute inset-0 flex items-center justify-center"
                initial={{ scale: 0, opacity: 1.5 }}
                animate={{ scale: 4, opacity: 0 }}
                transition={{
                    duration: 2,
                    repeat: Infinity,
                    ease: "easeOut",
                    repeatDelay: 0.5,
                    delay: i * 0.4,
                }}
            >
                <span className="absolute w-4 h-4 bg-gray-300 bg-opacity-40 rounded-full"/>
            </motion.span>
        ))}
        {children}
    </button>
);

const VariantsList = ({ variants }) => (
    <ul className="text-black text-[14px] flex flex-col gap-2">
        {variants.map((variant, index) => (
            <li key={index} className="flex gap-2 items-center">
                <Image src="/check-0.png" alt="" width={16} height={16} className="w-4 h-4"/>
                <span>{parseText(variant)}</span>
            </li>
        ))}
    </ul>
);

// Компонент для кнопок типов виз
const VisaTypeButtons = ({types, links, enabled}) => (
    <>
        {types.map((text, index) => (
            <div key={index} className="flex flex-col items-start">
                {enabled[index] ? (
                    <Link
                        href={`/shengenskie-vizy/${links[index]}`}
                        className="sm:w-full mdd:w-full text-[14px] text-center lg:w-72 bg-customBlue text-white py-3 px-8 rounded-full shadow-[0_2px_4px_-2px_rgba(0,122,255,0.8)] hover:bg-blue-600 active:scale-95 transition-transform duration-150 ease-in-out"
                    >
                        {text}
                    </Link>
                ) : (
                    <div
                        className="sm:w-full mdd:w-full text-[14px] text-center lg:w-72 bg-customBlue text-white py-3 px-8 rounded-full cursor-not-allowed pointer-events-none select-none">
                        {text}
                    </div>
                )}
            </div>
        ))}
    </>
);

const TextBlock = ({ text, parseText, className = "" }) => (
    text && <p className={`text-black text-[14px] ${className}`}>
        {parseText(text)}
    </p>
);

const SectionTitle = ({ title, className = "" }) => (
    title && <h2 className={`pt-20 mdd:pt-8 text-black text-[18px] md:text-[28px] sm:text-[22px] font-semibold ${className}`}>
        {title}
    </h2>
);

const parseText = (text) => {
    if (typeof text !== "string") return text || "";

  const lines = text.split("\n");

  return lines.map((line, lineIndex) => {
    const parts = line.split(/(\*\*.*?\*\*|__.*?__|%%.*?%%)/g);

    const parsedParts = parts.map((part, index) => {
      if (part.startsWith("**") && part.endsWith("**")) {
        return <b key={index}>{part.slice(2, -2)}</b>; // жирный
      } else if (part.startsWith("__") && part.endsWith("__")) {
        return <span key={index} className="underline">{part.slice(2, -2)}</span>; // подчёркнутый
      } else if (part.startsWith("%%") && part.endsWith("%%")) {
        return (
          <span key={index} className="font-bold text-orange-500 text-lg">
            {part.slice(2, -2)}
          </span>
        );
        }
      return part; // обычный текст
    });

    return (
      <React.Fragment key={lineIndex}>
        {parsedParts}
        <br />
      </React.Fragment>
    );
  });
};

// Constants (unchanged)
const excludedCountries1 = [
    "rabochaya-viza-v-polshu",
    "delovaya-viza-v-polshu",
    "uchebnaya-viza-v-polshu",
    "gostevaya-polskaya-viza",
    "viza-v-polsy-po-karte-polyaka",
    "rabochaya-viza-v-bolgariyu",
    "rabochaya-viza-v-germaniyu",
    "rabochaya-viza-v-ispaniyu"
];

const litva = [
    "viza-v-litvu",
    "viza-v-chehiyu"
];

const form = [
    "viza-v-latviyu",
    "viza-v-chehiyu"
];

const il = [
    "viza-v-litvu",
    "viza-v-italiyu"
];

const subWorkGermany = [
    "rabochaya-viza-v-germaniyu"
];

const subWorkPoland = [
    "rabochaya-viza-v-polshu"
];

const italy = [
    "viza-v-italiyu"
];

const docs = [
    "rabochaya-viza-v-germaniyu",
    "rabochaya-viza-v-polshu",
    "viza-v-polshu",
    "delovaya-viza-v-polshu",
    "uchebnaya-viza-v-polshu",
    "gostevaya-polskaya-viza",
    "viza-v-polsy-po-karte-polyaka",
    "viza-v-germaniyu",
    "viza-vo-francziyu",
    "viza-v-horvatiu",
    "viza-v-grecziyu",
    "viza-v-italiyu",
    "viza-v-avstriyu",
    "viza-v-sloveniu",
    "viza-v-ispaniyu",
    "rabochaya-viza-v-ispaniyu",
    "viza-v-bolgariyu",
    "rabochaya-viza-v-bolgariyu",
    "viza-v-niderlandy",
    "viza-v-vengriyu",
    "viza-v-rumyniyu",
    "viza-v-ssha",
    "viza-v-velikobritaniyu",
    "viza-v-kitaj"
];

const excludedPoland = [
    "viza-v-polshu",
    "rabochaya-viza-v-polshu",
    "delovaya-viza-v-polshu",
    "uchebnaya-viza-v-polshu",
    "gostevaya-polskaya-viza",
    "viza-v-polsy-po-karte-polyaka"
];

// Компонент для хлебных крошек
const CountryBreadcrumbs = ({country, pathname}) => (
    <nav className="mb-4 mdd:text-xs flex items-baseline sm:space-x-2 mdd:space-x-0 text-gray-600 gap-2">
        <Link href="/"
              className="text-orange-500 hover:underline active:scale-95 transition-transform duration-150 ease-in-out">
            Главная
        </Link>
        <Image src="/nav-icon.png" alt=">" width={8} height={8} className="w-2"/>
        <Link
            href="/shengenskie-vizy"
            className={`text-orange-500 hover:underline ${pathname === "/shengenskie-vizy" ? "font-semibold text-gray-900 pointer-events-none w-full active:scale-95 transition-transform duration-150 ease-in-out" : ""}`}
        >
            Шенгенские визы
        </Link>
        <Image src="/nav-icon.png" alt=">" width={8} height={8} className="w-2"/>
        <span className="font-semibold text-gray-900 cursor-default inline-flex flex-wrap m-0">
                {!excludedCountries1.includes(country.url) && (
                    <>
                        Виза{" "}
                        {country.n === "Францию" ? "во" : "в"}{" "}
                    </>
                )}
            {country.n}
            </span>
    </nav>
);


export default function CountryPage({ breadcrumbs, countryData, countryUrl }) {
    const { country: urlParam } = useParams();
    const { openModal } = useModal();
    const pathname = usePathname();

    const selectedCountry = useMemo(() =>
            countries.find(c => c.url === (countryUrl || urlParam)),
        [countryUrl, urlParam]
    );

    if (!selectedCountry) {
        return notFound();
    }

    const showExtendedContent = selectedCountry.good !== 0;

    const recommendedCountries = useMemo(() =>
            ["viza-v-grecziyu", "viza-v-sloveniu", "viza-v-germaniyu", "viza-v-ispaniyu"]
                .map(url => countries.find(c => c.url === url))
                .filter(Boolean),
        []
    );

    const limitedContentCountries = ["viza-v-litvu", "viza-v-latviyu", "viza-v-italiyu", "viza-v-chehiyu"];

    const isExcludedPoland = excludedPoland.includes(selectedCountry.url);

    return (
        <div className="flex flex-col items-center">
            {breadcrumbs && <CountryBreadcrumbs breadcrumbs={breadcrumbs}/>}

            <div
                className={`w-full relative flex flex-col lg:flex-row sm:flex-col justify-between ${isExcludedPoland ? 'mdd:-mt-10' : 'mdd:-mt-10'}`}>
                <div
                    className={`mdd:relative lg:absolute sm:relative left-0 top-[200px] lg:top-[300px] ${isExcludedPoland ? 'mdd:top-[150px]' : 'mdd:top-[150px]'} w-full lg:w-1/2 text-left lg:text-left z-10 px-[7%] flex flex-col xl:gap-32 lg:gap-20 sm:gap-12 mdd:gap-12`}>
                    <CountryBreadcrumbs country={selectedCountry} pathname={pathname}/>
                    <span>
                        <h1 className="ht:text-[40px] lg:text-[40px] md:text-[40px] sm:text-[34px] mdd:text-[28px] font-semibold text-black uppercase leading-none">
                            {excludedCountries1.includes(selectedCountry.url)
                                ? selectedCountry.n
                                : `Виза ${selectedCountry.n === "Францию" ? "во" : "в"} ${selectedCountry.n}`}
                        </h1>
                        {(subWorkGermany.includes(selectedCountry.url) || subWorkPoland.includes(selectedCountry.url)) && (
                            <p className="mdd:text-[14px] sm:text-[20px]">* оформление «под ключ» в Минске!</p>
                        )}
                        {(italy.includes(selectedCountry.url)) && (
                            <p className="mdd:text-[14px] sm:text-[20px]">*оформление «под ключ»!</p>
                        )}
                    </span>
                </div>

                <div className="w-full lg:flex items-center lg:mt-0 mdd:mt-[10%] mt-[20%] relative z-5">
                    <Image
                        src={ selectedCountry.url === "viza-v-italiyu" ? "/visa-000.jpg" : 
                                selectedCountry.url === "viza-v-polshu" ? "/visac-banner.svg" :
                                selectedCountry.rb === 1 ? "/visa-c.png" : "/visa-cc.png"}
                        alt=""
                        width={1000}
                        height={1000}
                        priority={false} // Установите true только для критических изображений
                        unoptimized={false} // Отключите, если изображение уже оптимизировано
                        className={`relative lg:top-[120px] sm:top-0 lg:w-[50%] -z-50 mdd:hidden lg:translate-y-[45px]
                            ${(selectedCountry.url === "viza-v-italiyu" || selectedCountry.url === "viza-v-polshu") ? "lg:left-[25%] mt-[40px] md:mt-0" : "lg:left-[50%]"}`}
                    />
                    <Image
                        src={selectedCountry.url === "viza-v-italiyu" ? "/visa-001.jpg" : 
                            selectedCountry.url === "viza-v-polshu" ? "/visa-111.jpg" :
                            selectedCountry.rb === 1 ? "/visa-112.webp" : "/visa-001.webp"}
                        alt=""
                        width={600}
                        height={600}
                        quality={80}
                        priority={true} // Установите true только для критических изображений
                        unoptimized={false} // Отключите, если изображение уже оптимизировано
                        loading="eager"
                        className={`relative top-[20%] -z-50 sm:hidden ${(selectedCountry.url === "viza-v-italiyu" || selectedCountry.url === "viza-v-polshu") ? "mt-[10px] md:mt-0" : " "}`}
                    />
                </div>


                <div className={` ${selectedCountry.url === "viza-v-italiyu" ? "dr:pb-[83%] mdd:pb-[78%]" : 
                    selectedCountry.url === "viza-v-polshu" ? "dr:pb-[65%] mdd:pb-[65%]" : "mdd:pb-[25%]" } lg:hidden absolute bottom-0 w-full px-[7%] pb-[19%] `}>
                    <RippleButton onClick={openModal}>
                        Получить консультацию
                    </RippleButton>
                </div>

                {selectedCountry.url === "viza-v-italiyu" && ( 
                    <>
                        <ul className={`dr:translate-y-[-20px] mddd:translate-y-[-25px] lg:absolute top-1/2 lg:right-[7%] lg:transform lg:-translate-y-3 space-y-4 text-left lg:p-4 sm:pt-10 mdd:mt-8 mdd:pb-10 rounded-md pl-[7%] 1024m:ml-0 ml-[7%] mb-[20px] mr-auto lg:m-0`}>
                            <AdvantageItemTop value="от 10 дней" description="срок рассмотрения заявления" iconPath={"/icontime.svg"} />
                            <AdvantageItemTop value="до 3-х лет" description="срок действия визы" iconPath={"/icondoc.svg"}/>
                            <AdvantageItemTop value="99%" description="одобрения виз" iconPath={"/approvalicon.svg"}/>
                        </ul>
                    </>
                )}

                {selectedCountry.url === "viza-v-polshu" && ( 
                    <>
                        <ul className={`dr:translate-y-[-20px] mddd:translate-y-[-25px] lg:absolute top-1/2 lg:right-[7%] lg:transform lg:-translate-y-3 space-y-4 text-left lg:p-4 sm:pt-10 mdd:mt-8 mdd:pb-10 rounded-md pl-[7%] 1024m:ml-0 ml-[7%] mb-[20px] mr-auto lg:m-0`}>
                            <AdvantageItemTop value="21 день" description="срок рассмотрения заявления" iconPath={"/icontime.svg"} />
                            <AdvantageItemTop value="Сопровождение" description="в процессе верификации" iconPath={"/icondoc.svg"}/>
                        </ul>
                    </>
                )}
            </div>

            {/* Lazy Sections */}
            <LazySection>
                <Discount />
            </LazySection>

            <LazySection>
                <Slider />
            </LazySection>

            {showExtendedContent ? (
                <div className="w-full">
                    <div className={`px-[7%] pb-16 mdd:pb-10`}>
                        <div className="pt-16 mdd:pt-10 flex flex-col gap-6">
                            <div className="flex flex-col gap-6 lg:w-[60%]">
                                <h2 title={selectedCountry.title}
                                    className={`text-black text-[18px] md:text-[28px] sm:text-[22px] font-semibold`}>
                                    {selectedCountry.title}
                                </h2>
                                {selectedCountry.textTop1 && (<TextBlock text={selectedCountry.textTop1} parseText={parseText}/>)}
                                {selectedCountry.textTop2 && (<TextBlock text={selectedCountry.textTop2} parseText={parseText}/>)}
                                {selectedCountry.textTop3 && (<TextBlock text={selectedCountry.textTop3} parseText={parseText}/>)}
                                <TextBlock text={selectedCountry.text1} parseText={parseText}/>
                                {selectedCountry.text112 && (
                                    <TextBlock text={selectedCountry.text112} parseText={parseText}/>
                                )}

                            </div>
                            {/* {(selectedCountry.url === "rabochaya-viza-v-polshu" && selectedCountry.alternativeCountries) && (
                                <CountryCards/>
                            )} */}
                            <div className="flex flex-col gap-6 lg:w-[60%]">
                                
                                {selectedCountry.variants?.length > 0 && (
                                    <VariantsList variants={selectedCountry.variants}/>
                                )}

                                {Array.isArray(selectedCountry.text11) && (
                                    <div>
                                        {selectedCountry.text11.map((text, i) => (
                                            <TextBlock key={i} text={text} parseText={parseText}/>
                                        ))}
                                    </div>
                                )}

                                <SectionTitle className="pt-10 mdd:pt-4" title={selectedCountry.title223}/>
                                <TextBlock text={selectedCountry.text53} parseText={parseText}/>
                                <TextBlock text={selectedCountry.text54} parseText={parseText}/>
                                {selectedCountry.variants223?.length > 0 && (
                                    <VariantsList variants={selectedCountry.variants223}/>
                                )}

                                <SectionTitle className="pt-10 mdd:pt-4" title={selectedCountry.title22}/>
                                <TextBlock text={selectedCountry.text2} parseText={parseText}/>
                                <TextBlock text={selectedCountry.text3} parseText={parseText}/>

                                {selectedCountry.variants11?.length > 0 && (
                                    <VariantsList variants={selectedCountry.variants11}/>
                                )}

                                <SectionTitle className="pt-10 mdd:pt-4" title={selectedCountry.title221}/>
                                <TextBlock text={selectedCountry.text4} parseText={parseText}/>
                                {selectedCountry.variantsDelovaya?.length > 0 && (
                                    <VariantsList variants={selectedCountry.variantsDelovaya}/>
                                )}
                                <TextBlock text={selectedCountry.text5} parseText={parseText}/>
                                {selectedCountry.text611 && (<TextBlock text={selectedCountry.text611} parseText={parseText}/>)} 
                                {selectedCountry.text711 && (<TextBlock text={selectedCountry.text711} parseText={parseText}/>)} 
                            </div>
                            {/* {(selectedCountry.url === "delovaya-viza-v-polshu" && selectedCountry.alternativeCountries) && (
                                <CountryCards/>
                            )} */}
                            {selectedCountry.title811 && (
                                <SectionTitle className="pt-10 mdd:pt-4" title={selectedCountry.title811}/>)
                            }
                            {selectedCountry.text911 && (<div className="flex flex-col gap-6 lg:w-[60%]"><TextBlock text={selectedCountry.text911} parseText={parseText}/> </div>)} 
                            {selectedCountry.variants911 && (<div className="flex flex-col gap-6 lg:w-[60%]"><VariantsList variants={selectedCountry.variants911}/></div>)} 
                            

                            {selectedCountry.typevc && (<div className="w-full pt-20 mdd:pt-8"><TakePrice/></div>)}
                            {selectedCountry.typevc && (
                                <p className="pt-20 mdd:pt-8 text-black text-[18px] md:text-[28px] sm:text-[22px] font-semibold">
                                    {parseText(selectedCountry.typevc)}
                                </p>
                            )}
                            {selectedCountry.typevc && (
                                <TextBlock text={selectedCountry.textc} parseText={parseText}/>)}
                            {selectedCountry.typevbc?.length > 0 && (
                                <VisaTypeButtons
                                    types={selectedCountry.typevbc}
                                    links={selectedCountry.typevlc}
                                    enabled={selectedCountry.enabled || []}
                                />
                            )}

                            {selectedCountry.title2 && (
                                <SectionTitle className="pt-10 mdd:pt-4" title={selectedCountry.title2}/>)}
                            {selectedCountry.variants2?.length > 0 && (
                                <VariantsList variants={selectedCountry.variants2}/>
                            )}

                            {Array.isArray(selectedCountry.text22) && (
                                <div>
                                    {selectedCountry.text22.slice(0, 3).map((text, i) => (
                                        <TextBlock key={i} text={text} parseText={parseText}/>
                                    ))}
                                </div>
                            )}

                            {selectedCountry.text6 && (<TextBlock text={selectedCountry.text6} parseText={parseText}/>)} 
                            {selectedCountry.text622 && (<div className="flex flex-col gap-6 lg:w-[60%]"><TextBlock text={selectedCountry.text622} parseText={parseText}/> </div>)} 
                            {/* {(selectedCountry.url === "gostevaya-polskaya-viza" && selectedCountry.alternativeCountries) && (<CountryCards/>)} */}
                            {/* {(selectedCountry.url === "viza-v-polshu" && selectedCountry.alternativeCountries) && (<CountryCards/>)} */}
                            {/* {(selectedCountry.url === "viza-v-polsy-po-karte-polyaka" && selectedCountry.alternativeCountries) && (<CountryCards/>)} */}
                            {/* {(selectedCountry.url === "uchebnaya-viza-v-polshu" && selectedCountry.alternativeCountries) && (<CountryCards/>)} */}
                            
                            {selectedCountry.title222 && (
                                <SectionTitle className="pt-10 mdd:pt-4" title={selectedCountry.title222}/>)}
                            {selectedCountry.text222 && (<TextBlock text={selectedCountry.text222} parseText={parseText}/>)}
                            {selectedCountry.variants222?.length > 0 && (
                                <VariantsList variants={selectedCountry.variants222}/>
                            )}
                            {(selectedCountry.url === "viza-v-polshu" 
                                || selectedCountry.url === "rabochaya-viza-v-polshu"
                                || selectedCountry.url === "delovaya-viza-v-polshu") 
                            && ( 
                                <>
                                    <div className="flex flex-col gap-6"> 
                                    <ul className="grid grid-cols-2 gap-4 text-center md:grid-cols-4 lg:gap-6 lg:p-4 sm:pt-10 rounded-md">
                                        <AdvantageItem value="Более 10 лет" description="на рынке" />
                                        <AdvantageItem value="98%" description="одобрения виз" />
                                        <AdvantageItem value="20 000+" description="успешных кейсов" />
                                        <AdvantageItem value="10 000+" description="довольных клиентов" />
                                    </ul> 
                                    </div>
                                </>
                            )}
                            {selectedCountry.text7 && (<TextBlock text={selectedCountry.text7} parseText={parseText}/>)}
                            {selectedCountry.text8 && (<TextBlock text={selectedCountry.text8} parseText={parseText}/>)}

                            {selectedCountry.variants3?.length > 0 && (
                                <VariantsList variants={selectedCountry.variants3} parseText={parseText}/>)}

                            {selectedCountry.typevp && (<div className="w-full pt-20 mdd:pt-8"><TakePrice/></div>)}
                            {selectedCountry.typevp && (
                                <p className="pt-20 mdd:pt-8 text-black text-[18px] md:text-[28px] sm:text-[22px] font-semibold">{parseText(selectedCountry.typevp)}</p>)}
                            {selectedCountry.typevbp?.length > 0 && (
                                <VisaTypeButtons
                                    types={selectedCountry.typevbp}
                                    links={selectedCountry.typevlp}
                                    enabled={selectedCountry.enabled || []}
                                />)}

                            {selectedCountry.typev && (<div className="w-full pt-20 mdd:pt-8"><TakePrice/></div>)}

                            <div className="flex flex-col gap-6 lg:w-[60%]">
                                {selectedCountry.typev && (
                                    <p className="pt-20 mdd:pt-8 text-black text-[18px] md:text-[28px] sm:text-[22px] font-semibold">
                                        {parseText(selectedCountry.typev)}
                                    </p>
                                )}

                                {selectedCountry.typevb?.length > 0 && (
                                    <VisaTypeButtons
                                        types={selectedCountry.typevb}
                                        links={selectedCountry.typevl}
                                        enabled={selectedCountry.enabled || []}
                                    />
                                )}
                            </div>
                            

                            <SectionTitle
                                className="pt-10 mdd:pt-4"
                                title={`Кому подходит ${selectedCountry.match}`}
                            />
                            <TextBlock
                                text={`Подходит для граждан РБ и иностранных граждан, имеющих ВНЖ Республики Беларусь!`}
                                parseText={parseText}/>

                            <WhoItSuitsTable
                                country={selectedCountry}
                                parseText={parseText}
                                excludedCountries1={excludedCountries1}
                            />

                            <TextBlock text={selectedCountry.text001} parseText={parseText}/>

                            <SectionTitle
                                className="pt-10 mdd:pt-4"
                                title={
                                    selectedCountry.url === "viza-v-polsy-po-karte-polyaka"
                                        ? "Кому подходит виза по Карте Поляка"
                                        : excludedCountries1.includes(selectedCountry.url)
                                            ? selectedCountry.pr
                                            : `Стоимость оформления визы ${selectedCountry.n === "Францию" ? "во" : "в"} ${selectedCountry.n}`
                                }
                            />

                            <PriceTable country={selectedCountry} parseText={parseText}/>
                            {selectedCountry.textAfterPrice && 
                                (<div className="flex flex-col gap-6 lg:w-[60%]"><TextBlock text={selectedCountry.textAfterPrice} parseText={parseText}/> </div>)}
                        </div>
                    </div>

                    <div className={"pt-16 mdd:pt-10"}>
                        <LazySection>
                            {docs.includes(selectedCountry.url) ? (
                                <DocsShengen countryUrl={selectedCountry.url} />
                            ) : (
                                <Docs />
                            )}
                        </LazySection>
                    </div>

                    <LazySection>
                        <DownloadFiles />
                    </LazySection>

                    <LazySection>
                        <NewStepsCountries />
                    </LazySection>

                    {(selectedCountry.url !== "delovaya-viza-v-polshu" 
                        && selectedCountry.url !== "uchebnaya-viza-v-polshu"
                        && selectedCountry.url !== "gostevaya-polskaya-viza"
                        && selectedCountry.url !== "viza-v-polsy-po-karte-polyaka")  
                    && (
                            <LazySection>
                                <PhoneForm />
                            </LazySection>
                    )}

                    <LazySection>
                        <FAQ countryUrl={selectedCountry.url} />
                    </LazySection>

                    {(selectedCountry.url === "viza-v-ispaniyu" || 
                        selectedCountry.url === "viza-v-grecziyu" || 
                        selectedCountry.url === "viza-v-germaniyu") && (
                        <div className={`px-[7%]`}>
                            <div className="pt-16 mdd:pt-10 flex flex-col gap-6">
                                <div className="flex flex-col gap-6 lg:w-[60%]">
                                    <h2 title={selectedCountry.titleAfterFAQ}
                                        className={`text-black text-[18px] md:text-[28px] sm:text-[22px] font-semibold`}>
                                        {selectedCountry.titleAfterFAQ}
                                    </h2>
                                    {selectedCountry.textAfterFAQ1 && (
                                        <TextBlock text={selectedCountry.textAfterFAQ1} parseText={parseText}/>
                                    )}

                                    {selectedCountry.titleAfterFAQ2 && (
                                        <h3 className="text-black text-[16px] md:text-[26px] sm:text-[20px] font-semibold">
                                            {selectedCountry.titleAfterFAQ2}
                                        </h3>
                                    )}
                                    {selectedCountry.textAfterFAQ2 && (
                                        <TextBlock text={selectedCountry.textAfterFAQ2} parseText={parseText}/>
                                    )}


                                    {selectedCountry.titleAfterFAQ3 && (
                                        <h3 className="text-black text-[16px] md:text-[26px] sm:text-[20px] font-semibold">
                                            {selectedCountry.titleAfterFAQ3}
                                        </h3>
                                    )}
                                    {selectedCountry.textAfterFAQ3 && (
                                        <TextBlock text={selectedCountry.textAfterFAQ3} parseText={parseText}/>
                                    )}


                                    {selectedCountry.titleAfterFAQ4 && (
                                        <h3 className="text-black text-[16px] md:text-[26px] sm:text-[20px] font-semibold">
                                            {selectedCountry.titleAfterFAQ4}
                                        </h3>
                                    )}
                                    {selectedCountry.textAfterFAQ4 && (
                                        <TextBlock text={selectedCountry.textAfterFAQ4} parseText={parseText}/>
                                    )}

                                    {selectedCountry.titleAfterFAQ5 && (
                                        <h3 className="text-black text-[16px] md:text-[26px] sm:text-[20px] font-semibold">
                                            {selectedCountry.titleAfterFAQ5}
                                        </h3>
                                    )}
                                    {selectedCountry.textAfterFAQ5 && (
                                        <TextBlock text={selectedCountry.textAfterFAQ5} parseText={parseText}/>
                                    )}

                                    {selectedCountry.titleAfterFAQ52 && (
                                        <h2 className="text-black text-[18px] md:text-[28px] sm:text-[22px] font-semibold">
                                            {selectedCountry.titleAfterFAQ52}
                                        </h2>
                                    )}
                                    {selectedCountry.textAfterFAQ52 && (
                                        <TextBlock text={selectedCountry.textAfterFAQ52} parseText={parseText}/>
                                    )}


                                    {selectedCountry.titleAfterFAQ6 && (
                                        <h3 className="text-black text-[16px] md:text-[26px] sm:text-[20px] font-semibold">
                                            {selectedCountry.titleAfterFAQ6}
                                        </h3>
                                    )}
                                    {selectedCountry.textAfterFAQ6 && (
                                        <TextBlock text={selectedCountry.textAfterFAQ6} parseText={parseText}/>
                                    )}

      
                                    {selectedCountry.titleAfterFAQ7 && (
                                        <h3 className="text-black text-[16px] md:text-[26px] sm:text-[20px] font-semibold">
                                            {selectedCountry.titleAfterFAQ7}
                                        </h3>
                                    )}
                                    {selectedCountry.textAfterFAQ7 && (
                                        <TextBlock text={selectedCountry.textAfterFAQ7} parseText={parseText}/>
                                    )}
                                    {(
                                        selectedCountry.url === "viza-v-ispaniyu" && 
                                        (<p className={"italic text-[14px]"}>
                                            <a className="underline cursor-pointer hover:font-normal font-medium text-blue-500" 
                                                target="_blank" rel="noopener noreferrer" onClick={openModal}>Свяжитесь с нами</a>, чтобы оформить визу в Испанию быстро и без лишних хлопот!
                                        </p>)
                                    )}
                                    {(
                                        selectedCountry.url === "viza-v-germaniyu" && 
                                        (<p className={"italic text-[14px]"}>
                                            <a className="underline cursor-pointer hover:font-normal font-medium text-blue-500" 
                                                target="_blank" rel="noopener noreferrer" onClick={openModal}>Свяжитесь с нами</a>, чтобы быстро и без стресса <b>открыть визу в Германию!</b>
                                        </p>)
                                    )}
                                </div>
                            </div>
                        </div>
                    )}

                    <LazySection>
                        <Contacts />
                    </LazySection>
                </div>
            ) : (
                <div className="w-full">
                    <div className="px-[7%] flex flex-col gap-10">
                        {limitedContentCountries.includes(selectedCountry.url) && (
                            <div className="xl:pt-0 pt-10 flex flex-col gap-6">
                                {selectedCountry.title12 && (
                                    <h3 className="text-[#F86F00] text-center lg:text-5xl md:text-5xl sm:text-4xl mdd:text-2xl font-medium">
                                        {selectedCountry.title12}
                                    </h3>
                                )}
                                <div className="flex flex-col gap-6 lg:w-[60%]">
                                    {selectedCountry.title && (
                                        <h3 className="text-[#F86F00] lg:text-5xl md:text-5xl sm:text-4xl mdd:text-2xl font-medium">
                                            {selectedCountry.title}
                                        </h3>
                                    )}
                                    <div className="flex flex-col gap-6">
                                        <TextBlock text={selectedCountry.text1} parseText={parseText}/>
                                        <TextBlock text={selectedCountry.text2} parseText={parseText}/>

                                        <SectionTitle title={selectedCountry.title1} parseText={parseText}/>
                                        <TextBlock text={selectedCountry.text22} parseText={parseText}/>

                                        {selectedCountry.variants?.length > 0 && (
                                            <VariantsList variants={selectedCountry.variants}/>
                                        )}

                                        

                                        <TextBlock text={selectedCountry.text3} parseText={parseText}/>
                                        <TextBlock text={selectedCountry.text4} parseText={parseText}/>

                                        <TextBlock text={selectedCountry.text44} parseText={parseText}/>

                                        <SectionTitle title={selectedCountry.title13} parseText={parseText}/>

                                        <TextBlock text={selectedCountry.text5} parseText={parseText}/>

                                        {Array.isArray(selectedCountry.text22) && (
                                            <div>
                                                {selectedCountry.text22.slice(0, 2).map((text, i) => (
                                                    <TextBlock key={i} text={text} parseText={parseText}/>
                                                ))}
                                            </div>
                                        )}

                                        {selectedCountry.variants12?.length > 0 && (
                                            <VariantsList variants={selectedCountry.variants12}/>
                                        )}
                                    </div>
                                </div>

                                {selectedCountry.url === "viza-v-italiyu" && ( 
                                    <>
                                        <div className="flex flex-col gap-6"> 
                                        <ul className="grid grid-cols-2 gap-4 text-center md:grid-cols-4 lg:gap-6 lg:p-4 sm:pt-10 rounded-md">
                                            <AdvantageItem value="Более 10 лет" description="на рынке" />
                                            <AdvantageItem value="98%" description="одобрения виз" />
                                            <AdvantageItem value="20 000+" description="успешных кейсов" />
                                            <AdvantageItem value="10 000+" description="довольных клиентов" />
                                        </ul> 
                                        </div>
                                    </>
                                )}

                                {!form.includes(selectedCountry.url) && (
                                    <div className="w-full pt-20 mdd:pt-8">
                                        <TakePrice/>
                                    </div>
                                )}


                                <div className="flex flex-col gap-6 lg:w-[60%]">
                                    {selectedCountry.typev && (
                                        <p className="pt-20 mdd:pt-8 text-black text-[18px] md:text-[28px] sm:text-[22px] font-semibold">
                                            {parseText(selectedCountry.typev)}
                                        </p>
                                    )}

                                    {selectedCountry.typevb?.length > 0 && (
                                        <VisaTypeButtons
                                            types={selectedCountry.typevb}
                                            links={selectedCountry.typevl}
                                            enabled={selectedCountry.enabled || []}
                                        />
                                    )}
                                </div>

                                <div className="flex flex-col gap-6 lg:w-[60%]">
                                    {il.includes(selectedCountry.url) && (<div className={"flex flex-col gap-6"}>
                                        <SectionTitle
                                            className="pt-10 mdd:pt-4"
                                            title={`Кому подходит ${selectedCountry.match}`}
                                        />

                                        <TextBlock
                                            text={selectedCountry.textmatch1}
                                            parseText={parseText}/>

                                        {selectedCountry.textmatch1 && (
                                            <div className="overflow-x-auto w-full">
                                                <table className="w-full border-collapse">
                                                    <colgroup>
                                                        <col className="w-1/2"/>
                                                        <col className="w-1/2"/>
                                                    </colgroup>
                                                    <thead>
                                                    <tr>
                                                        <th className="border border-[#CEE2FA] bg-[#F0F6FF] px-4 py-3 text-left text-[14px] font-semibold text-gray-700 w-1/2">
                                                            {excludedCountries1.includes(selectedCountry.url) ? "Категории граждан" : "Типы визы"}
                                                        </th>
                                                        <th className="border border-[#CEE2FA] bg-[#F0F6FF] px-4 py-3 text-left text-[14px] font-semibold text-gray-700 w-1/2">
                                                            Цель поездки
                                                        </th>
                                                    </tr>
                                                    </thead>
                                                    <tbody>
                                                    {selectedCountry.matchTable1 &&
                                                        selectedCountry.matchTable1.map((row, index) => (
                                                            <tr key={index} className={index % 2 === 0 ? '' : 'bg-gray-50'}>
                                                                <td className="border border-[#CEE2FA] px-4 py-3 text-[14px] text-gray-700">{parseText(row.typeviza1)}</td>
                                                                <td className="border border-[#CEE2FA] px-4 py-3 text-[14px] text-gray-700">{parseText(row.goaltrip1)}</td>
                                                            </tr>
                                                        ))}
                                                    </tbody>
                                                </table>
                                            </div>
                                        )}

                                        

                                    {selectedCountry.url != "viza-v-italiyu" && (
                                        <>
                                            <TextBlock
                                            text={selectedCountry.textmatch}
                                            parseText={parseText}/>

                                            <WhoItSuitsTable
                                                country={selectedCountry}
                                                parseText={parseText}
                                                excludedCountries1={excludedCountries1}
                                            />
                                        </>
                                    )}

                                    </div>)}

                                    <SectionTitle title={selectedCountry.title14} parseText={parseText}/>

                                    <TextBlock text={selectedCountry.text66} parseText={parseText}/>
                                </div>

                                {selectedCountry.url === "viza-v-italiyu" && (
                                    <>
                                        <TextBlock
                                            text={selectedCountry.textmatch}
                                            parseText={parseText}/>
                                        <WhoItSuitsTable
                                            country={selectedCountry}
                                            parseText={parseText}
                                            excludedCountries1={excludedCountries1}
                                        />
                                        <SectionTitle
                                            className="pt-10 mdd:pt-4"
                                            title={`Стоимость оформления визы ${selectedCountry.n === "Францию" ? "во" : "в"} ${selectedCountry.n}`}
                                        />
                                        <PriceTable country={selectedCountry} parseText={parseText}/>
                                    </>
                                )}
                            </div>
                        )}
                    </div>
                    {selectedCountry.url === "viza-v-italiyu" && (
                        <LazySection>
                            <PhoneForm />
                        </LazySection>
                    )}


                    {form.includes(selectedCountry.url) && (
                        <div className="w-full px-[7%] pt-20 mdd:pt-8">
                            <TakePrice/>
                        </div>
                    )}

                    <div className={"pt-32 mdd:pt-20"}>
                        <LazySection>
                            {docs.includes(selectedCountry.url) ? (
                                <DocsShengen countryUrl={selectedCountry.url} />
                            ) : (
                                <Docs />
                            )}
                        </LazySection>
                    </div>

                    <LazySection>
                        <DownloadFiles />
                    </LazySection>

                    <LazySection>
                        <NewStepsCountries />
                    </LazySection>

                    {litva.includes(selectedCountry.url) ? (
                        <div></div>
                    ) : (
                        <LazySection>
                            <PhoneForm />
                        </LazySection>
                    )}

                    <LazySection>
                        <FAQ countryUrl={selectedCountry.url} />
                    </LazySection>

                    <LazySection>
                        <Contacts />
                    </LazySection>
                </div>
            )}
            <style jsx>{`
                .bold-list-numbers ::marker {
                    font-weight: bold;
                }
            `}</style>
        </div>
    );
};